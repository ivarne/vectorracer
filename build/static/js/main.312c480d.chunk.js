(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n(22)},16:function(e,t,n){},18:function(e,t,n){},20:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(8),i=n.n(r),o=(n(16),n(1)),s=n(2),l=n(4),u=n(3),h=n(5),p=(n(18),n(9)),f=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.size_x,n=e.size_y,a=" l 0 ".concat(n," m 1 -").concat(n).repeat(t+1),r=" l ".concat(t," 0 m -").concat(t," 1").repeat(n+1);return c.a.createElement("g",{className:"Grid"},c.a.createElement("path",{d:"M 0 0 "+a+"M 0 0"+r}))}}]),t}(a.PureComponent),m=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.x,n=e.y;return c.a.createElement("g",{className:"CurrentPos"},c.a.createElement("circle",{cx:t,cy:n,r:.5}))}}]),t}(a.PureComponent),y=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.x,n=e.delta_x,a=e.y,r=e.delta_y,i={r:.45};return c.a.createElement("g",{className:"NextPos"},c.a.createElement("circle",Object.assign({cx:t+n+1,cy:a+r+1},i)),c.a.createElement("circle",Object.assign({cx:t+n+0,cy:a+r+1},i)),c.a.createElement("circle",Object.assign({cx:t+n-1,cy:a+r+1},i)),c.a.createElement("circle",Object.assign({cx:t+n+1,cy:a+r+0},i)),c.a.createElement("circle",Object.assign({cx:t+n+0,cy:a+r+0},i)),c.a.createElement("circle",Object.assign({cx:t+n-1,cy:a+r+0},i)),c.a.createElement("circle",Object.assign({cx:t+n+1,cy:a+r-1},i)),c.a.createElement("circle",Object.assign({cx:t+n+0,cy:a+r-1},i)),c.a.createElement("circle",Object.assign({cx:t+n-1,cy:a+r-1},i)))}}]),t}(a.PureComponent),d=(n(20),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.trace;return c.a.createElement("g",{className:"Trace"},c.a.createElement("path",{d:"M"+e.join("L")}),e.map(function(e,t){return c.a.createElement("circle",{cx:e[0],cy:e[1],r:"0.2",key:t})}))}}]),t}(a.PureComponent)),b=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"_sum",value:function(e){var t=Math.sign(e);e=Math.abs(e);for(var n=0;e>0;)n+=e,e--;return n*t}},{key:"getStops",value:function(e,t){return[e+this._sum(t-1),e+this._sum(t),e+this._sum(t+1)]}},{key:"render",value:function(){var e,t,n=this.props,a=n.x,r=n.y,i=n.delta_x,o=n.delta_y,s=n.size_x,l=n.size_y;return Math.abs(i)>2&&(e=this.getStops(a,i).map(function(e,t){return c.a.createElement("path",{d:"M".concat(e," 0 l0 ").concat(s),className:"stop"+t,key:t})})),Math.abs(o)>2&&(t=this.getStops(r,o).map(function(e,t){return c.a.createElement("path",{d:"M0 ".concat(e," l").concat(l," 0"),className:"stop"+t,key:t})})),c.a.createElement("g",{className:"StopLine"},e,t)}}]),t}(a.PureComponent),j=n(10),v=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.walls;return c.a.createElement("g",{className:"Walls"},e.map(function(e,t){var n=e.type,a=Object(j.a)(e,["type"]);return a.key=t,c.a.createElement(n,a)}))}}]),t}(a.PureComponent),O=n(6);function g(e,t){switch(e.type){case"rect":return function(e,t){var n=e.x,a=e.y,c=e.height,r=e.width;return x([[n,a],[n+r,a]],t)||x([[n,a+c],[n+r,a+c]],t)||x([[n,a],[n,a+c]],t)||x([[n+r,a],[n+r,a+c]],t)}(e,t);default:throw new Error("unknown wall type: ".concat(e.type))}}function x(e,t){var n=Object(O.a)(e,2),a=Object(O.a)(n[0],2),c=a[0],r=a[1],i=Object(O.a)(n[1],2),o=i[0],s=i[1],l=Object(O.a)(t,2),u=Object(O.a)(l[0],2),h=u[0],p=u[1],f=Object(O.a)(l[1],2),m=f[0],y=f[1];return c<=m&&o>=h&&r<=y&&s>=p}var E=[{type:"rect",x:10,y:10,height:30,width:30}],w=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).updatePos=function(e,t){n.setState(function(a){return n.isValidNextPos(e,t)?{trace:Object(p.a)(a.trace).concat([[e,t]]),x:e,y:t,delta_x:e-a.x,delta_y:t-a.y}:{}})},n.handleClick=function(e){var t=n.svg.createSVGPoint();t.x=e.clientX,t.y=e.clientY;var a=t.matrixTransform(n.svg.getScreenCTM().inverse());n.updatePos(Math.round(a.x),Math.round(a.y))},n.goBack=function(e){n.state.trace.length<2||n.setState(function(e){var t=e.trace.slice(0,-1),n=t[t.length-1],a=[0,0];if(t.length>1){var c=t[t.length-2];a=[n[0]-c[0],n[1]-c[1]]}return{trace:t,x:n[0],y:n[1],delta_x:a[0],delta_y:a[1]}})},n.state={x:e.initial_x,y:e.initial_y,delta_x:0,delta_y:0,trace:[[e.initial_x,e.initial_y]],walls:E},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"isValidNextPos",value:function(e,t){var n=this.state;return!(e>n.x+n.delta_x+1||e<n.x+n.delta_x-1)&&(!(t>n.y+n.delta_y+1||t<n.y+n.delta_y-1)&&!n.walls.some(function(a){return g(a,[[n.x,n.y],[e,t]])}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.size_x,a=t.size_y;return c.a.createElement("div",{className:"Game"},c.a.createElement("h1",null,"Vectorracer",this.state.trace.length),c.a.createElement("button",{onClick:this.goBack},"Undo"),c.a.createElement("svg",{className:"Game",viewBox:"-2 -2 ".concat(n+4," ").concat(a+4),onClick:this.handleClick,ref:function(t){e.svg=t}},c.a.createElement(f,{size_x:n,size_y:a}),c.a.createElement(v,{walls:E}),c.a.createElement(d,{trace:this.state.trace}),c.a.createElement(m,this.state),c.a.createElement(b,Object.assign({},this.state,this.props)),c.a.createElement(y,this.state)))}}]),t}(a.PureComponent),_=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"App"},c.a.createElement(w,{size_x:50,size_y:50,initial_x:5,initial_y:5}),";")}}]),t}(a.Component),k=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function C(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(c.a.createElement(_,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/vectorracer/build",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/vectorracer/build","/service-worker.js");k?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):C(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):C(e)})}}()}},[[11,2,1]]]);
//# sourceMappingURL=main.312c480d.chunk.js.map